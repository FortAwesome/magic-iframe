var __extends=this&&this.__extends||function(){var e=function(t,n){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};System.register(["./p-06f348de.system.js"],(function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e.r;n=e.c;r=e.h;i=e.H}],execute:function(){function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}var s=o((function(e){var t=e.exports={};t.forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r){return r}}}}));var a=function(e){var t=e.stateHandler.getState;function n(e){var n=t(e);return n&&!!n.isDetectable}function r(e){t(e).isDetectable=true}function i(e){return!!t(e).busy}function o(e,n){t(e).busy=!!n}return{isDetectable:n,markAsDetectable:r,isBusy:i,markBusy:o}};var u=function(e){var t={};function n(n){var r=e.get(n);if(r===undefined){return[]}return t[r]||[]}function r(n,r){var i=e.get(n);if(!t[i]){t[i]=[]}t[i].push(r)}function i(e,t){var r=n(e);for(var i=0,o=r.length;i<o;++i){if(r[i]===t){r.splice(i,1);break}}}function o(e){var t=n(e);if(!t){return}t.length=0}return{get:n,add:r,removeListener:i,removeAllListeners:o}};var c=function(){var e=1;function t(){return e++}return{generate:t}};var l=function(e){var t=e.idGenerator;var n=e.stateHandler.getState;function r(e){var t=n(e);if(t&&t.id!==undefined){return t.id}return null}function i(e){var r=n(e);if(!r){throw new Error("setId required the element to have a resize detection state.")}var i=t.generate();r.id=i;return i}return{get:r,set:i}};var f=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function e(){var n=console[t];if(n.apply){n.apply(console,arguments)}else{for(var r=0;r<arguments.length;r++){n(arguments[r])}}}};r(n,"log");r(n,"warn");r(n,"error")}return n};var h=o((function(e){var t=e.exports={};t.isIE=function(e){function t(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!==-1||e.indexOf("trident")!==-1||e.indexOf(" edge/")!==-1}if(!t()){return false}if(!e){return true}var n=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do{n.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(r[0]);return t>4?t:e}();return e===n};t.isLegacyOpera=function(){return!!window.opera}}));var d=o((function(e){var t=e.exports={};t.getOption=n;function n(e,t,n){var r=e[t];if((r===undefined||r===null)&&n!==undefined){return n}return r}}));var p=function e(t){t=t||{};var n=t.reporter;var r=d.getOption(t,"async",true);var i=d.getOption(t,"auto",true);if(i&&!r){n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true.");r=true}var o=v();var s;var a=false;function u(e,t){if(!a&&i&&r&&o.size()===0){f()}o.add(e,t)}function c(){a=true;while(o.size()){var e=o;o=v();e.process()}a=false}function l(e){if(a){return}if(e===undefined){e=r}if(s){h(s);s=null}if(e){f()}else{c()}}function f(){s=p(c)}function h(e){var t=clearTimeout;return t(e)}function p(e){var t=function(e){return setTimeout(e,0)};return t(e)}return{add:u,force:l}};function v(){var e={};var t=0;var n=0;var r=0;function i(i,o){if(!o){o=i;i=0}if(i>n){n=i}else if(i<r){r=i}if(!e[i]){e[i]=[]}e[i].push(o);t++}function o(){for(var t=r;t<=n;t++){var i=e[t];for(var o=0;o<i.length;o++){var s=i[o];s()}}}function s(){return t}return{add:i,process:o,size:s}}var y="_erd";function m(e){e[y]={};return b(e)}function b(e){return e[y]}function g(e){delete e[y]}var w={initState:m,getState:b,cleanState:g};var _=function(e){e=e||{};var t=e.reporter;var n=e.batchProcessor;var r=e.stateHandler.getState;if(!t){throw new Error("Missing required dependency: reporter.")}function i(e,t){function n(){t(e)}if(h.isIE(8)){r(e).object={proxy:n};e.attachEvent("onresize",n)}else{var i=a(e);if(!i){throw new Error("Element is not detectable by this strategy.")}i.contentDocument.defaultView.addEventListener("resize",n)}}function o(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function s(e,i,s){if(!s){s=i;i=e;e=null}e=e||{};function a(i,s){var a=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]);var u=false;var c=window.getComputedStyle(i);var l=i.offsetWidth;var f=i.offsetHeight;r(i).startSize={width:l,height:f};function d(){function n(){if(c.position==="static"){i.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,r,i){function o(e){return e.replace(/[^-\d\.]/g,"")}var s=r[i];if(s!=="auto"&&o(s)!=="0"){t.warn("An element that is positioned static has style."+i+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",n);n.style.setProperty(i,"0",e.important?"important":"")}};n(t,i,c,"top");n(t,i,c,"right");n(t,i,c,"bottom");n(t,i,c,"left")}}function o(){if(!u){n()}function e(t,n){if(!t.contentDocument){var i=r(t);if(i.checkForObjectDocumentTimeoutId){window.clearTimeout(i.checkForObjectDocumentTimeoutId)}i.checkForObjectDocumentTimeoutId=setTimeout((function r(){i.checkForObjectDocumentTimeoutId=0;e(t,n)}),100);return}n(t.contentDocument)}var t=this;e(t,(function e(t){s(i)}))}if(c.position!==""){n();u=true}var l=document.createElement("object");l.style.cssText=a;l.tabIndex=-1;l.type="text/html";l.setAttribute("aria-hidden","true");l.onload=o;if(!h.isIE()){l.data="about:blank"}if(!r(i)){return}i.appendChild(l);r(i).object=l;if(h.isIE()){l.data="about:blank"}}if(n){n.add(d)}else{d()}}if(h.isIE(8)){s(i)}else{a(i,s)}}function a(e){return r(e).object}function u(e){if(!r(e)){return}var t=a(e);if(!t){return}if(h.isIE(8)){e.detachEvent("onresize",t.proxy)}else{e.removeChild(t)}if(r(e).checkForObjectDocumentTimeoutId){window.clearTimeout(r(e).checkForObjectDocumentTimeoutId)}delete r(e).object}return{makeDetectable:s,addListener:i,uninstall:u}};var E=s.forEach;var x=function(e){e=e||{};var t=e.reporter;var n=e.batchProcessor;var r=e.stateHandler.getState;var i=e.idHandler;if(!n){throw new Error("Missing required dependency: batchProcessor")}if(!t){throw new Error("Missing required dependency: reporter.")}var o=l();var s="erd_scroll_detection_scrollbar_style";var a="erd_scroll_detection_container";function u(e){f(e,s,a)}u(window.document);function c(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function l(){var e=500;var t=500;var n=document.createElement("div");n.style.cssText=c(["position: absolute","width: "+e*2+"px","height: "+t*2+"px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=c(["position: absolute","width: "+e+"px","height: "+t+"px","overflow: scroll","visibility: none","top: "+-e*3+"px","left: "+-t*3+"px","visibility: hidden","margin: 0","padding: 0"]);r.appendChild(n);document.body.insertBefore(r,document.body.firstChild);var i=e-r.clientWidth;var o=t-r.clientHeight;document.body.removeChild(r);return{width:i,height:o}}function f(e,t,n){function r(n,r){r=r||function(t){e.head.appendChild(t)};var i=e.createElement("style");i.innerHTML=n;i.id=t;r(i);return i}if(!e.getElementById(t)){var i=n+"_animation";var o=n+"_animation_active";var s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+c(["display: none"])+" }\n\n";s+="."+o+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n";s+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n";s+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }";r(s)}}function h(e){e.className+=" "+a+"_animation_active"}function d(e,n,r){if(e.addEventListener){e.addEventListener(n,r)}else if(e.attachEvent){e.attachEvent("on"+n,r)}else{return t.error("[scroll] Don't know how to add event listeners.")}}function p(e,n,r){if(e.removeEventListener){e.removeEventListener(n,r)}else if(e.detachEvent){e.detachEvent("on"+n,r)}else{return t.error("[scroll] Don't know how to remove event listeners.")}}function v(e){return r(e).container.childNodes[0].childNodes[0].childNodes[0]}function y(e){return r(e).container.childNodes[0].childNodes[0].childNodes[1]}function m(e,t){var n=r(e).listeners;if(!n.push){throw new Error("Cannot add listener to an element that is not detectable.")}r(e).listeners.push(t)}function b(e,s,u){if(!u){u=s;s=e;e=null}e=e||{};function l(){if(e.debug){var n=Array.prototype.slice.call(arguments);n.unshift(i.get(s),"Scroll: ");if(t.log.apply){t.log.apply(null,n)}else{for(var r=0;r<n.length;r++){t.log(n[r])}}}}function f(e){function t(e){return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)}if(!t(e)){return true}if(window.getComputedStyle(e)===null){return true}return false}function p(e){var t=r(e).container.childNodes[0];var n=window.getComputedStyle(t);return!n.width||n.width.indexOf("px")===-1}function m(){var e=window.getComputedStyle(s);var t={};t.position=e.position;t.width=s.offsetWidth;t.height=s.offsetHeight;t.top=e.top;t.right=e.right;t.bottom=e.bottom;t.left=e.left;t.widthCSS=e.width;t.heightCSS=e.height;return t}function b(){var e=m();r(s).startSize={width:e.width,height:e.height};l("Element start size",r(s).startSize)}function g(){r(s).listeners=[]}function w(){l("storeStyle invoked.");if(!r(s)){l("Aborting because element has been uninstalled");return}var e=m();r(s).style=e}function _(e,t,n){r(e).lastWidth=t;r(e).lastHeight=n}function x(e){return v(e).childNodes[0]}function S(){return 2*o.width+1}function I(){return 2*o.height+1}function T(e){return e+10+S()}function C(e){return e+10+I()}function D(e){return e*2+S()}function O(e){return e*2+I()}function H(e,t,n){var r=v(e);var i=y(e);var o=T(t);var s=C(n);var a=D(t);var u=O(n);r.scrollLeft=o;r.scrollTop=s;i.scrollLeft=a;i.scrollTop=u}function A(){var e=r(s).container;if(!e){e=document.createElement("div");e.className=a;e.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]);r(s).container=e;h(e);s.appendChild(e);var t=function(){r(s).onRendered&&r(s).onRendered()};d(e,"animationstart",t);r(s).onAnimationStart=t}return e}function z(){function n(){var n=r(s).style;if(n.position==="static"){s.style.setProperty("position","relative",e.important?"important":"");var i=function(e,t,n,r){function i(e){return e.replace(/[^-\d\.]/g,"")}var o=n[r];if(o!=="auto"&&i(o)!=="0"){e.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t);t.style[r]=0}};i(t,s,n,"top");i(t,s,n,"right");i(t,s,n,"bottom");i(t,s,n,"left")}}function i(e,t,n,r){e=!e?"0":e+"px";t=!t?"0":t+"px";n=!n?"0":n+"px";r=!r?"0":r+"px";return["left: "+e,"top: "+t,"right: "+r,"bottom: "+n]}l("Injecting elements");if(!r(s)){l("Aborting because element has been uninstalled");return}n();var u=r(s).container;if(!u){u=A()}var f=o.width;var h=o.height;var p=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]);var v=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(i(-(1+f),-(1+h),-h,-f)));var y=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]);var m=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]);var b=c(["position: absolute","left: 0","top: 0"]);var g=c(["position: absolute","width: 200%","height: 200%"]);var w=document.createElement("div");var _=document.createElement("div");var E=document.createElement("div");var x=document.createElement("div");var S=document.createElement("div");var I=document.createElement("div");w.dir="ltr";w.style.cssText=p;w.className=a;_.className=a;_.style.cssText=v;E.style.cssText=y;x.style.cssText=b;S.style.cssText=m;I.style.cssText=g;E.appendChild(x);S.appendChild(I);_.appendChild(E);_.appendChild(S);w.appendChild(_);u.appendChild(w);function T(){r(s).onExpand&&r(s).onExpand()}function C(){r(s).onShrink&&r(s).onShrink()}d(E,"scroll",T);d(S,"scroll",C);r(s).onExpandScroll=T;r(s).onShrinkScroll=C}function k(){function o(t,n,r){var i=x(t);var o=T(n);var s=C(r);i.style.setProperty("width",o+"px",e.important?"important":"");i.style.setProperty("height",s+"px",e.important?"important":"")}function a(a){var c=s.offsetWidth;var f=s.offsetHeight;var h=c!==r(s).lastWidth||f!==r(s).lastHeight;l("Storing current size",c,f);_(s,c,f);n.add(0,(function n(){if(!h){return}if(!r(s)){l("Aborting because element has been uninstalled");return}if(!u()){l("Aborting because element container has not been initialized");return}if(e.debug){var a=s.offsetWidth;var d=s.offsetHeight;if(a!==c||d!==f){t.warn(i.get(s),"Scroll: Size changed before updating detector elements.")}}o(s,c,f)}));n.add(1,(function e(){if(!r(s)){l("Aborting because element has been uninstalled");return}if(!u()){l("Aborting because element container has not been initialized");return}H(s,c,f)}));if(h&&a){n.add(2,(function(){if(!r(s)){l("Aborting because element has been uninstalled");return}if(!u()){l("Aborting because element container has not been initialized");return}a()}))}}function u(){return!!r(s).container}function c(){function e(){return r(s).lastNotifiedWidth===undefined}l("notifyListenersIfNeeded invoked");var t=r(s);if(e()&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height){return l("Not notifying: Size is the same as the start size, and there has been no notification yet.")}if(t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight){return l("Not notifying: Size already notified")}l("Current size not notified, notifying...");t.lastNotifiedWidth=t.lastWidth;t.lastNotifiedHeight=t.lastHeight;E(r(s).listeners,(function(e){e(s)}))}function f(){l("startanimation triggered.");if(p(s)){l("Ignoring since element is still unrendered...");return}l("Element rendered.");var e=v(s);var t=y(s);if(e.scrollLeft===0||e.scrollTop===0||t.scrollLeft===0||t.scrollTop===0){l("Scrollbars out of sync. Updating detector elements...");a(c)}}function h(){l("Scroll detected.");if(p(s)){l("Scroll event fired while unrendered. Ignoring...");return}a(c)}l("registerListenersAndPositionElements invoked.");if(!r(s)){l("Aborting because element has been uninstalled");return}r(s).onRendered=f;r(s).onExpand=h;r(s).onShrink=h;var d=r(s).style;o(s,d.width,d.height)}function N(){l("finalizeDomMutation invoked.");if(!r(s)){l("Aborting because element has been uninstalled");return}var e=r(s).style;_(s,e.width,e.height);H(s,e.width,e.height)}function j(){u(s)}function W(){l("Installing...");g();b();n.add(0,w);n.add(1,z);n.add(2,k);n.add(3,N);n.add(4,j)}l("Making detectable...");if(f(s)){l("Element is detached");A();l("Waiting until element is attached...");r(s).onRendered=function(){l("Element is now attached");W()}}else{W()}}function g(e){var t=r(e);if(!t){return}t.onExpandScroll&&p(v(e),"scroll",t.onExpandScroll);t.onShrinkScroll&&p(y(e),"scroll",t.onShrinkScroll);t.onAnimationStart&&p(t.container,"animationstart",t.onAnimationStart);t.container&&e.removeChild(t.container)}return{makeDetectable:b,addListener:m,uninstall:g,initDocument:u}};var S=s.forEach;function I(e){return Array.isArray(e)||e.length!==undefined}function T(e){if(!Array.isArray(e)){var t=[];S(e,(function(e){t.push(e)}));return t}else{return e}}function C(e){return e&&e.nodeType===1}var D=function(e){e=e||{};var t;if(e.idHandler){t={get:function(t){return e.idHandler.get(t,true)},set:e.idHandler.set}}else{var n=c();var r=l({idGenerator:n,stateHandler:w});t=r}var i=e.reporter;if(!i){var o=i===false;i=f(o)}var s=O(e,"batchProcessor",p({reporter:i}));var d={};d.callOnAdd=!!O(e,"callOnAdd",true);d.debug=!!O(e,"debug",false);var v=u(t);var y=a({stateHandler:w});var m;var b=O(e,"strategy","object");var g=O(e,"important",false);var E={reporter:i,batchProcessor:s,stateHandler:w,idHandler:t,important:g};if(b==="scroll"){if(h.isLegacyOpera()){i.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy.");b="object"}else if(h.isIE(9)){i.warn("Scroll strategy is not supported on IE9. Changing to object strategy.");b="object"}}if(b==="scroll"){m=x(E)}else if(b==="object"){m=_(E)}else{throw new Error("Invalid strategy name: "+b)}var D={};function H(e,n,r){function o(e){var t=v.get(e);S(t,(function t(n){n(e)}))}function s(e,t,n){v.add(t,n);if(e){n(t)}}if(!r){r=n;n=e;e={}}if(!n){throw new Error("At least one element required.")}if(!r){throw new Error("Listener required.")}if(C(n)){n=[n]}else if(I(n)){n=T(n)}else{return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.")}var a=0;var u=O(e,"callOnAdd",d.callOnAdd);var c=O(e,"onReady",(function e(){}));var l=O(e,"debug",d.debug);S(n,(function e(f){if(!w.getState(f)){w.initState(f);t.set(f)}var h=t.get(f);l&&i.log("Attaching listener to element",h,f);if(!y.isDetectable(f)){l&&i.log(h,"Not detectable.");if(y.isBusy(f)){l&&i.log(h,"System busy making it detectable");s(u,f,r);D[h]=D[h]||[];D[h].push((function e(){a++;if(a===n.length){c()}}));return}l&&i.log(h,"Making detectable...");y.markBusy(f,true);return m.makeDetectable({debug:l,important:g},f,(function e(t){l&&i.log(h,"onElementDetectable");if(w.getState(t)){y.markAsDetectable(t);y.markBusy(t,false);m.addListener(t,o);s(u,t,r);var f=w.getState(t);if(f&&f.startSize){var d=t.offsetWidth;var p=t.offsetHeight;if(f.startSize.width!==d||f.startSize.height!==p){o(t)}}if(D[h]){S(D[h],(function(e){e()}))}}else{l&&i.log(h,"Element uninstalled before being detectable.")}delete D[h];a++;if(a===n.length){c()}}))}l&&i.log(h,"Already detecable, adding listener.");s(u,f,r);a++}));if(a===n.length){c()}}function A(e){if(!e){return i.error("At least one element is required.")}if(C(e)){e=[e]}else if(I(e)){e=T(e)}else{return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.")}S(e,(function(e){v.removeAllListeners(e);m.uninstall(e);w.cleanState(e)}))}function z(e){m.initDocument&&m.initDocument(e)}return{listenTo:H,removeListener:v.removeListener,removeAllListeners:v.removeAllListeners,uninstall:A,initDocument:z}};function O(e,t,n){var r=e[t];if((r===undefined||r===null)&&n!==undefined){return n}return r}var H=/^(%20|\s)*(javascript|data)/im;var A=/[^\x20-\x7E]/gim;var z=/^([^:]+):/gm;var k=[".","/"];function N(e){return k.indexOf(e[0])>-1}function j(e){var t,n,r;if(!e){return"about:blank"}r=e.replace(A,"").trim();if(N(r)){return r}n=r.match(z);if(!n){return r}t=n[0];if(H.test(t)){return"about:blank"}return r}var W={sanitizeUrl:j};var L=W.sanitizeUrl;function P(e){return typeof e==="function"}var R=false;var B={Promise:undefined,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else if(R){console.log("RxJS: Back to a better error behavior. Thank you. <3")}R=e},get useDeprecatedSynchronousErrorHandling(){return R}};function V(e){setTimeout((function(){throw e}),0)}var M={closed:true,next:function(e){},error:function(e){if(B.useDeprecatedSynchronousErrorHandling){throw e}else{V(e)}},complete:function(){}};var U=function(){return Array.isArray||function(e){return e&&typeof e.length==="number"}}();function Y(e){return e!==null&&typeof e==="object"}var F=function(){function e(e){Error.call(this);this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"";this.name="UnsubscriptionError";this.errors=e;return this}e.prototype=Object.create(Error.prototype);return e}();var q=F;var $=function(){function e(e){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(e){this._unsubscribe=e}}e.prototype.unsubscribe=function(){var t;if(this.closed){return}var n=this,r=n._parentOrParents,i=n._unsubscribe,o=n._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(r instanceof e){r.remove(this)}else if(r!==null){for(var s=0;s<r.length;++s){var a=r[s];a.remove(this)}}if(P(i)){try{i.call(this)}catch(l){t=l instanceof q?G(l.errors):[l]}}if(U(o)){var s=-1;var u=o.length;while(++s<u){var c=o[s];if(Y(c)){try{c.unsubscribe()}catch(l){t=t||[];if(l instanceof q){t=t.concat(G(l.errors))}else{t.push(l)}}}}}if(t){throw new q(t)}};e.prototype.add=function(t){var n=t;if(!t){return e.EMPTY}switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||typeof n.unsubscribe!=="function"){return n}else if(this.closed){n.unsubscribe();return n}else if(!(n instanceof e)){var r=n;n=new e;n._subscriptions=[r]}break;default:{throw new Error("unrecognized teardown "+t+" added to Subscription.")}}var i=n._parentOrParents;if(i===null){n._parentOrParents=this}else if(i instanceof e){if(i===this){return n}n._parentOrParents=[i,this]}else if(i.indexOf(this)===-1){i.push(this)}else{return n}var o=this._subscriptions;if(o===null){this._subscriptions=[n]}else{o.push(n)}return n};e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);if(n!==-1){t.splice(n,1)}}};return e}();$.EMPTY=function(e){e.closed=true;return e}(new $);function G(e){return e.reduce((function(e,t){return e.concat(t instanceof q?t.errors:t)}),[])}var J=function(){return typeof Symbol==="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();var K=function(e){__extends(t,e);function t(n,r,i){var o=e.call(this)||this;o.syncErrorValue=null;o.syncErrorThrown=false;o.syncErrorThrowable=false;o.isStopped=false;switch(arguments.length){case 0:o.destination=M;break;case 1:if(!n){o.destination=M;break}if(typeof n==="object"){if(n instanceof t){o.syncErrorThrowable=n.syncErrorThrowable;o.destination=n;n.add(o)}else{o.syncErrorThrowable=true;o.destination=new X(o,n)}break}default:o.syncErrorThrowable=true;o.destination=new X(o,n,r,i);break}return o}t.prototype[J]=function(){return this};t.create=function(e,n,r){var i=new t(e,n,r);i.syncErrorThrowable=false;return i};t.prototype.next=function(e){if(!this.isStopped){this._next(e)}};t.prototype.error=function(e){if(!this.isStopped){this.isStopped=true;this._error(e)}};t.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete()}};t.prototype.unsubscribe=function(){if(this.closed){return}this.isStopped=true;e.prototype.unsubscribe.call(this)};t.prototype._next=function(e){this.destination.next(e)};t.prototype._error=function(e){this.destination.error(e);this.unsubscribe()};t.prototype._complete=function(){this.destination.complete();this.unsubscribe()};t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=e;return this};return t}($);var X=function(e){__extends(t,e);function t(t,n,r,i){var o=e.call(this)||this;o._parentSubscriber=t;var s;var a=o;if(P(n)){s=n}else if(n){s=n.next;r=n.error;i=n.complete;if(n!==M){a=Object.create(n);if(P(a.unsubscribe)){o.add(a.unsubscribe.bind(a))}a.unsubscribe=o.unsubscribe.bind(o)}}o._context=a;o._next=s;o._error=r;o._complete=i;return o}t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;if(!B.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(this._next,e)}else if(this.__tryOrSetError(t,this._next,e)){this.unsubscribe()}}};t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;var n=B.useDeprecatedSynchronousErrorHandling;if(this._error){if(!n||!t.syncErrorThrowable){this.__tryOrUnsub(this._error,e);this.unsubscribe()}else{this.__tryOrSetError(t,this._error,e);this.unsubscribe()}}else if(!t.syncErrorThrowable){this.unsubscribe();if(n){throw e}V(e)}else{if(n){t.syncErrorValue=e;t.syncErrorThrown=true}else{V(e)}this.unsubscribe()}}};t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};if(!B.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(n);this.unsubscribe()}else{this.__tryOrSetError(t,n);this.unsubscribe()}}else{this.unsubscribe()}}};t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){this.unsubscribe();if(B.useDeprecatedSynchronousErrorHandling){throw n}else{V(n)}}};t.prototype.__tryOrSetError=function(e,t,n){if(!B.useDeprecatedSynchronousErrorHandling){throw new Error("bad call")}try{t.call(this._context,n)}catch(r){if(B.useDeprecatedSynchronousErrorHandling){e.syncErrorValue=r;e.syncErrorThrown=true;return true}else{V(r);return true}}return false};t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null;this._parentSubscriber=null;e.unsubscribe()};return t}(K);function Q(e){while(e){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r){return false}else if(n&&n instanceof K){e=n}else{e=null}}return true}function Z(e,t,n){if(e){if(e instanceof K){return e}if(e[J]){return e[J]()}}if(!e&&!t&&!n){return new K(M)}return new K(e,t,n)}var ee=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();function te(){}function ne(e){if(!e){return te}if(e.length===1){return e[0]}return function t(n){return e.reduce((function(e,t){return t(e)}),n)}}var re=function(){function e(e){this._isScalar=false;if(e){this._subscribe=e}}e.prototype.lift=function(t){var n=new e;n.source=this;n.operator=t;return n};e.prototype.subscribe=function(e,t,n){var r=this.operator;var i=Z(e,t,n);if(r){i.add(r.call(i,this.source))}else{i.add(this.source||B.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i))}if(B.useDeprecatedSynchronousErrorHandling){if(i.syncErrorThrowable){i.syncErrorThrowable=false;if(i.syncErrorThrown){throw i.syncErrorValue}}}return i};e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){if(B.useDeprecatedSynchronousErrorHandling){e.syncErrorThrown=true;e.syncErrorValue=t}if(Q(e)){e.error(t)}else{console.warn(t)}}};e.prototype.forEach=function(e,t){var n=this;t=ie(t);return new t((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n);if(i){i.unsubscribe()}}}),r,t)}))};e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)};e.prototype[ee]=function(){return this};e.prototype.pipe=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===0){return this}return ne(e)(this)};e.prototype.toPromise=function(e){var t=this;e=ie(e);return new e((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))};return e}();re.create=function(e){return new re(e)};function ie(e){if(!e){e=Promise}if(!e){throw new Error("no Promise impl found")}return e}var oe=function(){function e(){Error.call(this);this.message="object unsubscribed";this.name="ObjectUnsubscribedError";return this}e.prototype=Object.create(Error.prototype);return e}();var se=oe;var ae=function(e){__extends(t,e);function t(t,n){var r=e.call(this)||this;r.subject=t;r.subscriber=n;r.closed=false;return r}t.prototype.unsubscribe=function(){if(this.closed){return}this.closed=true;var e=this.subject;var t=e.observers;this.subject=null;if(!t||t.length===0||e.isStopped||e.closed){return}var n=t.indexOf(this.subscriber);if(n!==-1){t.splice(n,1)}};return t}($);var ue=function(e){__extends(t,e);function t(t){var n=e.call(this,t)||this;n.destination=t;return n}return t}(K);var ce=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.observers=[];t.closed=false;t.isStopped=false;t.hasError=false;t.thrownError=null;return t}t.prototype[J]=function(){return new ue(this)};t.prototype.lift=function(e){var t=new le(this,this);t.operator=e;return t};t.prototype.next=function(e){if(this.closed){throw new se}if(!this.isStopped){var t=this.observers;var n=t.length;var r=t.slice();for(var i=0;i<n;i++){r[i].next(e)}}};t.prototype.error=function(e){if(this.closed){throw new se}this.hasError=true;this.thrownError=e;this.isStopped=true;var t=this.observers;var n=t.length;var r=t.slice();for(var i=0;i<n;i++){r[i].error(e)}this.observers.length=0};t.prototype.complete=function(){if(this.closed){throw new se}this.isStopped=true;var e=this.observers;var t=e.length;var n=e.slice();for(var r=0;r<t;r++){n[r].complete()}this.observers.length=0};t.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null};t.prototype._trySubscribe=function(t){if(this.closed){throw new se}else{return e.prototype._trySubscribe.call(this,t)}};t.prototype._subscribe=function(e){if(this.closed){throw new se}else if(this.hasError){e.error(this.thrownError);return $.EMPTY}else if(this.isStopped){e.complete();return $.EMPTY}else{this.observers.push(e);return new ae(this,e)}};t.prototype.asObservable=function(){var e=new re;e.source=this;return e};return t}(re);ce.create=function(e,t){return new le(e,t)};var le=function(e){__extends(t,e);function t(t,n){var r=e.call(this)||this;r.destination=t;r.source=n;return r}t.prototype.next=function(e){var t=this.destination;if(t&&t.next){t.next(e)}};t.prototype.error=function(e){var t=this.destination;if(t&&t.error){this.destination.error(e)}};t.prototype.complete=function(){var e=this.destination;if(e&&e.complete){this.destination.complete()}};t.prototype._subscribe=function(e){var t=this.source;if(t){return this.source.subscribe(e)}else{return $.EMPTY}};return t}(ce);var fe=function(e){__extends(t,e);function t(t,n){return e.call(this)||this}t.prototype.schedule=function(e,t){if(t===void 0){t=0}return this};return t}($);var he=function(e){__extends(t,e);function t(t,n){var r=e.call(this,t,n)||this;r.scheduler=t;r.work=n;r.pending=false;return r}t.prototype.schedule=function(e,t){if(t===void 0){t=0}if(this.closed){return this}this.state=e;var n=this.id;var r=this.scheduler;if(n!=null){this.id=this.recycleAsyncId(r,n,t)}this.pending=true;this.delay=t;this.id=this.id||this.requestAsyncId(r,this.id,t);return this};t.prototype.requestAsyncId=function(e,t,n){if(n===void 0){n=0}return setInterval(e.flush.bind(e,this),n)};t.prototype.recycleAsyncId=function(e,t,n){if(n===void 0){n=0}if(n!==null&&this.delay===n&&this.pending===false){return t}clearInterval(t);return undefined};t.prototype.execute=function(e,t){if(this.closed){return new Error("executing a cancelled action")}this.pending=false;var n=this._execute(e,t);if(n){return n}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null)}};t.prototype._execute=function(e,t){var n=false;var r=undefined;try{this.work(e)}catch(i){n=true;r=!!i&&i||new Error(i)}if(n){this.unsubscribe();return r}};t.prototype._unsubscribe=function(){var e=this.id;var t=this.scheduler;var n=t.actions;var r=n.indexOf(this);this.work=null;this.state=null;this.pending=false;this.scheduler=null;if(r!==-1){n.splice(r,1)}if(e!=null){this.id=this.recycleAsyncId(t,e,null)}this.delay=null};return t}(fe);var de=function(){function e(t,n){if(n===void 0){n=e.now}this.SchedulerAction=t;this.now=n}e.prototype.schedule=function(e,t,n){if(t===void 0){t=0}return new this.SchedulerAction(this,e).schedule(n,t)};return e}();de.now=function(){return Date.now()};var pe=function(e){__extends(t,e);function t(n,r){if(r===void 0){r=de.now}var i=e.call(this,n,(function(){if(t.delegate&&t.delegate!==i){return t.delegate.now()}else{return r()}}))||this;i.actions=[];i.active=false;i.scheduled=undefined;return i}t.prototype.schedule=function(n,r,i){if(r===void 0){r=0}if(t.delegate&&t.delegate!==this){return t.delegate.schedule(n,r,i)}else{return e.prototype.schedule.call(this,n,r,i)}};t.prototype.flush=function(e){var t=this.actions;if(this.active){t.push(e);return}var n;this.active=true;do{if(n=e.execute(e.state,e.delay)){break}}while(e=t.shift());this.active=false;if(n){while(e=t.shift()){e.unsubscribe()}throw n}};return t}(de);var ve=new re((function(e){return e.complete()}));function ye(e){return e?me(e):ve}function me(e){return new re((function(t){return e.schedule((function(){return t.complete()}))}))}function be(e){return e&&typeof e.schedule==="function"}var ge=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++){t.next(e[n])}t.complete()}};function we(e,t){return new re((function(n){var r=new $;var i=0;r.add(t.schedule((function(){if(i===e.length){n.complete();return}n.next(e[i++]);if(!n.closed){r.add(this.schedule())}})));return r}))}function _e(e,t){if(!t){return new re(ge(e))}else{return we(e,t)}}var Ee=new pe(he);function xe(e){return e}var Se=function(){function e(){Error.call(this);this.message="argument out of range";this.name="ArgumentOutOfRangeError";return this}e.prototype=Object.create(Error.prototype);return e}();var Ie=Se;function Te(e,t){return function n(r){if(typeof e!=="function"){throw new TypeError("argument is not a function. Are you looking for `mapTo()`?")}return r.lift(new Ce(e,t))}}var Ce=function(){function e(e,t){this.project=e;this.thisArg=t}e.prototype.call=function(e,t){return t.subscribe(new De(e,this.project,this.thisArg))};return e}();var De=function(e){__extends(t,e);function t(t,n,r){var i=e.call(this,t)||this;i.project=n;i.count=0;i.thisArg=r||i;return i}t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){this.destination.error(n);return}this.destination.next(t)};return t}(K);var Oe=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)};t.prototype.notifyError=function(e,t){this.destination.error(e)};t.prototype.notifyComplete=function(e){this.destination.complete()};return t}(K);var He=function(e){__extends(t,e);function t(t,n,r){var i=e.call(this)||this;i.parent=t;i.outerValue=n;i.outerIndex=r;i.index=0;return i}t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)};t.prototype._error=function(e){this.parent.notifyError(e,this);this.unsubscribe()};t.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return t}(K);var Ae=function(e){return function(t){e.then((function(e){if(!t.closed){t.next(e);t.complete()}}),(function(e){return t.error(e)})).then(null,V);return t}};function ze(){if(typeof Symbol!=="function"||!Symbol.iterator){return"@@iterator"}return Symbol.iterator}var ke=ze();var Ne=function(e){return function(t){var n=e[ke]();do{var r=n.next();if(r.done){t.complete();break}t.next(r.value);if(t.closed){break}}while(true);if(typeof n.return==="function"){t.add((function(){if(n.return){n.return()}}))}return t}};var je=function(e){return function(t){var n=e[ee]();if(typeof n.subscribe!=="function"){throw new TypeError("Provided object does not correctly implement Symbol.observable")}else{return n.subscribe(t)}}};var We=function(e){return e&&typeof e.length==="number"&&typeof e!=="function"};function Le(e){return!!e&&typeof e.subscribe!=="function"&&typeof e.then==="function"}var Pe=function(e){if(!!e&&typeof e[ee]==="function"){return je(e)}else if(We(e)){return ge(e)}else if(Le(e)){return Ae(e)}else if(!!e&&typeof e[ke]==="function"){return Ne(e)}else{var t=Y(e)?"an invalid object":"'"+e+"'";var n="You provided "+t+" where a stream was expected."+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)}};function Re(e,t,n,r,i){if(i===void 0){i=new He(e,n,r)}if(i.closed){return undefined}if(t instanceof re){return t.subscribe(i)}return Pe(t)(i)}function Be(e,t){return new re((function(n){var r=new $;r.add(t.schedule((function(){var i=e[ee]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))})));return r}))}function Ve(e,t){return new re((function(n){var r=new $;r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e);r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))})));return r}))}function Me(e,t){if(!e){throw new Error("Iterable cannot be null")}return new re((function(n){var r=new $;var i;r.add((function(){if(i&&typeof i.return==="function"){i.return()}}));r.add(t.schedule((function(){i=e[ke]();r.add(t.schedule((function(){if(n.closed){return}var e;var t;try{var r=i.next();e=r.value;t=r.done}catch(o){n.error(o);return}if(t){n.complete()}else{n.next(e);this.schedule()}})))})));return r}))}function Ue(e){return e&&typeof e[ee]==="function"}function Ye(e){return e&&typeof e[ke]==="function"}function Fe(e,t){if(e!=null){if(Ue(e)){return Be(e,t)}else if(Le(e)){return Ve(e,t)}else if(We(e)){return we(e,t)}else if(Ye(e)||typeof e==="string"){return Me(e,t)}}throw new TypeError((e!==null&&typeof e||e)+" is not observable")}function qe(e,t){if(!t){if(e instanceof re){return e}return new re(Pe(e))}else{return Fe(e,t)}}function $e(e,t,n){if(n===void 0){n=Number.POSITIVE_INFINITY}if(typeof t==="function"){return function(r){return r.pipe($e((function(n,r){return qe(e(n,r)).pipe(Te((function(e,i){return t(n,e,r,i)})))}),n))}}else if(typeof t==="number"){n=t}return function(t){return t.lift(new Ge(e,n))}}var Ge=function(){function e(e,t){if(t===void 0){t=Number.POSITIVE_INFINITY}this.project=e;this.concurrent=t}e.prototype.call=function(e,t){return t.subscribe(new Je(e,this.project,this.concurrent))};return e}();var Je=function(e){__extends(t,e);function t(t,n,r){if(r===void 0){r=Number.POSITIVE_INFINITY}var i=e.call(this,t)||this;i.project=n;i.concurrent=r;i.hasCompleted=false;i.buffer=[];i.active=0;i.index=0;return i}t.prototype._next=function(e){if(this.active<this.concurrent){this._tryNext(e)}else{this.buffer.push(e)}};t.prototype._tryNext=function(e){var t;var n=this.index++;try{t=this.project(e,n)}catch(r){this.destination.error(r);return}this.active++;this._innerSub(t,e,n)};t.prototype._innerSub=function(e,t,n){var r=new He(this,t,n);var i=this.destination;i.add(r);var o=Re(this,e,undefined,undefined,r);if(o!==r){i.add(o)}};t.prototype._complete=function(){this.hasCompleted=true;if(this.active===0&&this.buffer.length===0){this.destination.complete()}this.unsubscribe()};t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)};t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e);this.active--;if(t.length>0){this._next(t.shift())}else if(this.active===0&&this.hasCompleted){this.destination.complete()}};return t}(Oe);function Ke(e){if(e===void 0){e=Number.POSITIVE_INFINITY}return $e(xe,e)}function Xe(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===1){var n=e[0];if(U(n)){return Qe(n,null)}if(Y(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Qe(r.map((function(e){return n[e]})),r)}}if(typeof e[e.length-1]==="function"){var i=e.pop();e=e.length===1&&U(e[0])?e[0]:e;return Qe(e,null).pipe(Te((function(e){return i.apply(void 0,e)})))}return Qe(e,null)}function Qe(e,t){return new re((function(n){var r=e.length;if(r===0){n.complete();return}var i=new Array(r);var o=0;var s=0;var a=function(a){var u=qe(e[a]);var c=false;n.add(u.subscribe({next:function(e){if(!c){c=true;s++}i[a]=e},error:function(e){return n.error(e)},complete:function(){o++;if(o===r||!c){if(s===r){n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i)}n.complete()}}}))};for(var u=0;u<r;u++){a(u)}}))}function Ze(e,t,n,r){if(P(n)){r=n;n=undefined}if(r){return Ze(e,t,n).pipe(Te((function(e){return U(e)?r.apply(void 0,e):r(e)})))}return new re((function(r){function i(e){if(arguments.length>1){r.next(Array.prototype.slice.call(arguments))}else{r.next(e)}}et(e,t,i,r,n)}))}function et(e,t,n,r,i){var o;if(rt(e)){var s=e;e.addEventListener(t,n,i);o=function(){return s.removeEventListener(t,n,i)}}else if(nt(e)){var a=e;e.on(t,n);o=function(){return a.off(t,n)}}else if(tt(e)){var u=e;e.addListener(t,n);o=function(){return u.removeListener(t,n)}}else if(e&&e.length){for(var c=0,l=e.length;c<l;c++){et(e[c],t,n,r,i)}}else{throw new TypeError("Invalid event target")}r.add(o)}function tt(e){return e&&typeof e.addListener==="function"&&typeof e.removeListener==="function"}function nt(e){return e&&typeof e.on==="function"&&typeof e.off==="function"}function rt(e){return e&&typeof e.addEventListener==="function"&&typeof e.removeEventListener==="function"}function it(e){return!U(e)&&e-parseFloat(e)+1>=0}function ot(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=Number.POSITIVE_INFINITY;var r=null;var i=e[e.length-1];if(be(i)){r=e.pop();if(e.length>1&&typeof e[e.length-1]==="number"){n=e.pop()}}else if(typeof i==="number"){n=e.pop()}if(r===null&&e.length===1&&e[0]instanceof re){return e[0]}return Ke(n)(_e(e,r))}function st(e,t,n){if(e===void 0){e=0}var r=-1;if(it(t)){r=Number(t)<1&&1||Number(t)}else if(be(t)){n=t}if(!be(n)){n=Ee}return new re((function(t){var i=it(e)?e:+e-n.now();return n.schedule(at,i,{index:0,period:r,subscriber:t})}))}function at(e){var t=e.index,n=e.period,r=e.subscriber;r.next(t);if(r.closed){return}else if(n===-1){return r.complete()}e.index=t+1;this.schedule(e,n)}function ut(e){return function(t){return t.lift(new ct(e))}}var ct=function(){function e(e){this.durationSelector=e}e.prototype.call=function(e,t){return t.subscribe(new lt(e,this.durationSelector))};return e}();var lt=function(e){__extends(t,e);function t(t,n){var r=e.call(this,t)||this;r.durationSelector=n;r.hasValue=false;r.durationSubscription=null;return r}t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);if(t){this._tryNext(e,t)}}catch(n){this.destination.error(n)}};t.prototype._complete=function(){this.emitValue();this.destination.complete()};t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e;this.hasValue=true;if(n){n.unsubscribe();this.remove(n)}n=Re(this,t);if(n&&!n.closed){this.add(this.durationSubscription=n)}};t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()};t.prototype.notifyComplete=function(){this.emitValue()};t.prototype.emitValue=function(){if(this.hasValue){var t=this.value;var n=this.durationSubscription;if(n){this.durationSubscription=null;n.unsubscribe();this.remove(n)}this.value=null;this.hasValue=false;e.prototype._next.call(this,t)}};return t}(Oe);function ft(e){return function(t){if(e===0){return ye()}else{return t.lift(new ht(e))}}}var ht=function(){function e(e){this.total=e;if(this.total<0){throw new Ie}}e.prototype.call=function(e,t){return t.subscribe(new dt(e,this.total))};return e}();var dt=function(e){__extends(t,e);function t(t,n){var r=e.call(this,t)||this;r.total=n;r.count=0;return r}t.prototype._next=function(e){var t=this.total;var n=++this.count;if(n<=t){this.destination.next(e);if(n===t){this.destination.complete();this.unsubscribe()}}};return t}(K);function pt(e,t){if(typeof t==="function"){return function(n){return n.pipe(pt((function(n,r){return qe(e(n,r)).pipe(Te((function(e,i){return t(n,e,r,i)})))})))}}return function(t){return t.lift(new vt(e))}}var vt=function(){function e(e){this.project=e}e.prototype.call=function(e,t){return t.subscribe(new yt(e,this.project))};return e}();var yt=function(e){__extends(t,e);function t(t,n){var r=e.call(this,t)||this;r.project=n;r.index=0;return r}t.prototype._next=function(e){var t;var n=this.index++;try{t=this.project(e,n)}catch(r){this.destination.error(r);return}this._innerSub(t,e,n)};t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;if(r){r.unsubscribe()}var i=new He(this,t,n);var o=this.destination;o.add(i);this.innerSubscription=Re(this,e,undefined,undefined,i);if(this.innerSubscription!==i){o.add(this.innerSubscription)}};t.prototype._complete=function(){var t=this.innerSubscription;if(!t||t.closed){e.prototype._complete.call(this)}this.unsubscribe()};t.prototype._unsubscribe=function(){this.innerSubscription=null};t.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t);this.innerSubscription=null;if(this.isStopped){e.prototype._complete.call(this)}};t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)};return t}(Oe);function mt(e){return function(t){return t.lift(new bt(e))}}var bt=function(){function e(e){this.notifier=e}e.prototype.call=function(e,t){var n=new gt(e);var r=Re(n,this.notifier);if(r&&!n.seenValue){n.add(r);return t.subscribe(n)}return n};return e}();var gt=function(e){__extends(t,e);function t(t){var n=e.call(this,t)||this;n.seenValue=false;return n}t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=true;this.complete()};t.prototype.notifyComplete=function(){};return t}(Oe);function wt(e,t,n){return function r(i){return i.lift(new _t(e,t,n))}}var _t=function(){function e(e,t,n){this.nextOrObserver=e;this.error=t;this.complete=n}e.prototype.call=function(e,t){return t.subscribe(new Et(e,this.nextOrObserver,this.error,this.complete))};return e}();var Et=function(e){__extends(t,e);function t(t,n,r,i){var o=e.call(this,t)||this;o._tapNext=te;o._tapError=te;o._tapComplete=te;o._tapError=r||te;o._tapComplete=i||te;if(P(n)){o._context=o;o._tapNext=n}else if(n){o._context=n;o._tapNext=n.next||te;o._tapError=n.error||te;o._tapComplete=n.complete||te}return o}t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){this.destination.error(t);return}this.destination.next(e)};t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){this.destination.error(e);return}this.destination.error(e)};t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()};return t}(K);var xt=D({strategy:"scroll"});var St=e("seb_magic_iframe",function(){function e(e){t(this,e);this.ua=window.navigator.userAgent;this.msie=this.ua.indexOf("MSIE ");this.isIe=this.msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./);this.autoResize=true;this.resizeDebounce=0;this.scaleContent=false;this.scaleDebounce=0;this.matchContentWidth=false;this.sanitizeSource=true;this.maxHeight="10000vh";this.reloadOnChange=false;this.debug=false;this.loaded=false;this.loading=true;this.pageTitle="SEB Magic Iframe";this._scale=1;this._hasBodyWidthRule=false;this._stylesheets=[];this._unsubscribe$=new ce;this.magicIframeEvent=n(this,"magicIframeEvent",7)}e.prototype.sourceChangeHandler=function(e,t){var n=this;if(e.split("?")[0]!==t.split("?")[0]){this.loaded=false}else if(this.reloadOnChange&&e!==t){setTimeout((function(){return n.iframe.contentDocument.location.reload()}),200)}};e.prototype.scaleContentChangeHandler=function(e,t){if(e!==t){this.scale();if(e){this.matchContentWidth=false}}};e.prototype.stylesChangeHandler=function(e,t){if(e!==t){this.addCss()}};e.prototype.styleUrlsChangeHandler=function(e,t){if(e!==t){this.addStyleSheets()}};e.prototype.autoResizeChangeHandler=function(e,t){if(e!==t){if(!e){this.removeElementResizeDetector()}else if(this.iframe.contentDocument.body.getElementsByClassName("erd_scroll_detection_container").length===0){this.addElementResizeDetector(this.iframe.contentDocument.body,this.iframe.contentWindow.getComputedStyle(this.iframe.contentDocument.body))}}};e.prototype.matchContentWidthChangeHandler=function(e,t){if(e!==t){this.hasBodyWidthRule()}};e.prototype.loadedHandler=function(e,t){if(e!==t&&e){var n=this.preventOverflow();if(n){return}this.magicIframeEventHandler({event:"iframe-loaded",details:this._loadEvent});var r=this.iframe.contentDocument.title;if(r!==this.pageTitle){this.pageTitle=r;this.magicIframeEventHandler({event:"iframe-title-change",details:r})}this.addCss();this.addStyleSheets();if(this.autoResize){this.addElementResizeDetector(this.iframe.contentDocument.body,this.iframe.contentWindow.getComputedStyle(this.iframe.contentDocument.body))}this.addUnloadListener();this.addClickListener();this.addKeyUpListener();this.scale()}else{this.loading=true}};e.prototype.magicIframeEventHandler=function(e){if(this.debug){console.log(e)}this.magicIframeEvent.emit(e)};e.prototype.onIframeLoad=function(e){this._loadEvent=e;this.loaded=true};e.prototype.getSafeSrc=function(){return this.sanitizeSource?L(this.source):this.source};e.prototype.render=function(){var e=this;return r(i,{class:{loading:this.loading}},this.source?r("div",{style:this.loading&&{overflow:"hidden",position:"relative"}},r("div",{class:{"seb-iframe-loading":this.loading},style:!this.loading&&{visibility:"hidden"}},r("slot",null)),r("iframe",{src:this.getSafeSrc(),ref:function(t){return e.iframe=t},class:"seb-iframe",frameborder:"0",scrolling:"no",title:this.pageTitle,onLoad:function(t){return e.onIframeLoad(t)}})):null)};e.prototype.addElementResizeDetector=function(e,t){var n=this;xt.listenTo(e,(function(){clearTimeout(n._resizeDebounceTimeout);n._resizeDebounceTimeout=setTimeout((function(){return n.updateSize(t)}),n.resizeDebounce)}))};e.prototype.updateSize=function(e){var t=e||this.iframe.contentWindow.getComputedStyle(this.iframe.contentDocument.body);var n=this.iframe.contentDocument.body.offsetHeight;var r=parseInt(t.getPropertyValue("margin-top"),10);var i=parseInt(t.getPropertyValue("margin-bottom"),10);var o=(n+r+i)*this._scale;var s=this.iframe.contentDocument.body.offsetWidth;this.iframe.style.height=o+"px";this.iframe.style.maxHeight=this.maxHeight;if(this.matchContentWidth!==false&&this._hasBodyWidthRule&&s&&!this.scaleContent||this.minWidth){this.iframe.style.minWidth=this.minWidth||s+"px"}else{this.iframe.style.minWidth="100%"}this.magicIframeEventHandler({event:"iframe-resized",details:{width:s,height:o}})};e.prototype.addUnloadListener=function(){var e=this;if(this.isIe){Ze(this.iframe.contentWindow,"beforeunload").pipe(wt((function(t){e.iframe.style.visibility="hidden";e.loading=true})),pt((function(e){return st(3e3)})),mt(ot(Ze(this.iframe.contentWindow,"unload"),this._unsubscribe$))).subscribe((function(t){e.iframe.style.visibility="visible";e.loading=false}))}Ze(this.iframe.contentWindow,"unload").pipe(ft(1),mt(this._unsubscribe$)).subscribe((function(t){e.loaded=false;e.iframe.style.visibility="hidden";e.iframe.contentDocument.body.style.overflow="hidden";e.magicIframeEventHandler({event:"iframe-unloaded",details:t})}))};e.prototype.addClickListener=function(){var e=this;Ze(this.iframe.contentDocument,"click").pipe(mt(this._unsubscribe$)).subscribe((function(t){e.magicIframeEventHandler({event:"iframe-click",details:t})}))};e.prototype.addKeyUpListener=function(){var e=this;Ze(this.iframe.contentDocument,"keyup").pipe(mt(this._unsubscribe$)).subscribe((function(t){e.magicIframeEventHandler({event:"iframe-keyup",details:t})}))};e.prototype.addCss=function(){if(this.styles&&this.styles.length>0){if(!this._styleElement){this._styleElement=document.createElement("style");this._styleElement.setAttribute("id","sebMagicIframeStyles");this._styleElement.appendChild(document.createTextNode(this.styles))}else{try{this._styleElement.innerText=this.styles}catch(t){this._styleElement=document.createElement("style");this._styleElement.setAttribute("id","sebMagicIframeStyles");this._styleElement.appendChild(document.createTextNode(this.styles))}}this.iframe.contentWindow.document.getElementsByTagName("head")[0].appendChild(this._styleElement);this.magicIframeEventHandler({event:"iframe-styles-added",details:this.styles})}else if(this._styleElement){var e=this.iframe.contentWindow.document.getElementById("sebMagicIframeStyles");e.parentNode.removeChild(e);this._styleElement=null;e=null;this.magicIframeEventHandler({event:"iframe-styles-removed",details:this.styles})}};e.prototype.preventOverflow=function(){try{var e=this.iframe.contentWindow.document.createElement("style");this.iframe.contentWindow.document.body.style.position="static";this.styleElement=e;e.appendChild(document.createTextNode("html { overflow: hidden; }"));this.iframe.contentWindow.document.getElementsByTagName("head")[0].appendChild(e);return false}catch(t){console.log("Event listeners and/or styles and resize listener could not be added due to a cross-origin frame error.");console.warn(t);this.magicIframeEventHandler({event:"iframe-loaded-with-errors",details:t});this.iframe.style.visibility="visible";this.loading=false;return true}};e.prototype.addStyleSheets=function(){var e=this;if(this._stylesheets&&this._stylesheets.length>0){var t=this.iframe.contentDocument.head.querySelectorAll('link[data-seb-magic-iframe="true"]');if(t){for(var n=0;n<t.length;n++){t[n].parentNode.removeChild(t[n])}this.magicIframeEventHandler({event:"iframe-all-stylesheets-removed",details:this.styleUrls})}}if(this.styleUrls&&this.styleUrls.length>0){var r=[];this.styleUrls.map((function(t){var n=e.iframe.contentDocument.createElement("link");e._stylesheets=__spreadArrays(e._stylesheets,[n]);n.setAttribute("data-seb-magic-iframe","true");n["rel"]="stylesheet";n["type"]="text/css";n["href"]=e.sanitizeSource?L(t):t;var i=new ce;r=__spreadArrays(r,[i]);Ze(n,"load").pipe(ft(1),mt(e._unsubscribe$)).subscribe((function(n){e.magicIframeEventHandler({event:"iframe-stylesheet-loaded",details:t});i.next(t);i.complete()}));e.iframe.contentDocument.head.insertBefore(n,e.styleElement);e.magicIframeEventHandler({event:"iframe-stylesheet-load",details:t})}));Xe(r).pipe(ft(1),mt(this._unsubscribe$)).subscribe((function(){if(e.styleUrls.length>1){e.magicIframeEventHandler({event:"iframe-all-stylesheets-loaded",details:e.styleUrls})}e.hasBodyWidthRule();e.iframe.style.visibility="visible";e.loading=false}))}else{this.hasBodyWidthRule();this.iframe.style.visibility="visible";this.loading=false}};e.prototype.setScale=function(e){if(!e){var t=this._previousScale&&this._hasBodyWidthRule?this._previousScale:this.iframe.clientWidth/this.iframe.contentDocument.body.offsetWidth;this._previousScale=null;this._scale=t>1?1:t}else{this._previousScale=e;this._scale=e}this.iframe.contentDocument.body.style.transformOrigin="top left";this.iframe.contentDocument.body.style.transform="scale3d("+this._scale+","+this._scale+",1)";this.updateSize();if(e||this._scale!==1){this.magicIframeEventHandler({event:"iframe-content-scaled",details:this._scale})}};e.prototype.filterCssRuleBodyWidth=function(e){return e&&e.type===1&&e["selectorText"]==="body"&&(e["style"].width||e["style"].minWidth)};e.prototype.removeElementResizeDetector=function(){if(this.iframe.contentDocument.body&&xt){xt.uninstall(this.iframe.contentDocument.body)}};e.prototype.scale=function(){var e=this;if(this.scaleContent){this.setScale();if(!this._resizeListener){this._resizeListener=Ze(window,"resize").pipe(ut((function(){return st(e.scaleDebounce)})),mt(this._unsubscribe$)).subscribe((function(t){return e.setScale()}))}}else if(!this.scaleContent&&this._resizeListener){this._resizeListener.unsubscribe();this._resizeListener=null;this.setScale(1)}};e.prototype.hasBodyWidthRule=function(){var e=this;if(this.matchContentWidth!=="auto"){this._hasBodyWidthRule=this.matchContentWidth;this.updateSize();return}try{var t=[].slice.call(this.iframe.contentDocument.styleSheets).reduce((function(t,n){return n.cssRules?__spreadArrays(t,[[].slice.call(n.cssRules).map((function(t){return t.type===4?[].slice.call(t.cssRules).filter(e.filterCssRuleBodyWidth).pop():t})).filter(e.filterCssRuleBodyWidth).reduce((function(e,t){return __spreadArrays(e,[t["style"].width||t["style"].minWidth])}),[])]):__spreadArrays(t)}),[]);t=[].concat.apply([],t);this._hasBodyWidthRule=t.length>0;this.updateSize()}catch(n){console.log("Can't read css rules from stylesheet loaded from external domain.");console.warn(n)}};e.prototype.componentDidUnload=function(){this.magicIframeEventHandler({event:"iframe-removed",details:this.iframe});this._unsubscribe$.next();this._unsubscribe$.complete()};Object.defineProperty(e,"watchers",{get:function(){return{source:["sourceChangeHandler"],scaleContent:["scaleContentChangeHandler"],styles:["stylesChangeHandler"],styleUrls:["styleUrlsChangeHandler"],autoResize:["autoResizeChangeHandler"],matchContentWidth:["matchContentWidthChangeHandler"],loaded:["loadedHandler"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return":host{display:block;position:relative;-webkit-overflow-scrolling:touch;overflow:auto}.seb-iframe{overflow:hidden;min-width:100%;width:100px;*width:100%}.seb-iframe-loading{height:100%;width:100%;position:absolute;z-index:1}.seb-iframe-loading:after{background:#fff;content:\"\";display:block;height:100%;position:absolute;top:0;width:100%;z-index:-1;left:0}"},enumerable:true,configurable:true});return e}())}}}));